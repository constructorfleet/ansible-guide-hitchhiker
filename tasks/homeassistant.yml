---

- name: Ensure the configuration path exists
  file:
    state: directory
    path: "{{ hitchhiker_config.storage.config }}"

- debug:
    var: docker_containers

#- name: Ensure the internal path exists
#  file:
#    state: directory
#    path: "{{ hitchhiker_config.storage.internal }}"
#  when:
#    - hitchhiker_config.storage.internal is defined
#    - hitchhiker_config.storage.internal | default(False)

- name: Template out the customization file
  template:
    src: homeassistant/customization.yaml.j2
    dest: "{{ hitchhiker_config.storage.config }}/customization.yaml"

- name: Template out the configuration file
  template:
    src: homeassistant/configuration.yaml.j2
    dest: "{{ hitchhiker_config.storage.config }}/configuration.yaml"